!function(a,b,c,d){"use strict";var e="datepaginator",f=function(b,c){this._element=b,this.$element=a(b),this._init(c)};f.formats={date:"YYYY-MM-DD",day:"ddd"},f.defaults={injectStyle:!0,text:"ddd<br/>Do",textSelected:"dddd<br/>Do, MMMM YYYY",hint:"dddd, Do MMMM YYYY",fillWidth:!0,width:0,itemWidth:35,navItemWidth:20,selectedItemWidth:140,size:d,highlightSelectedDate:!0,highlightToday:!0,showCalendar:!0,squareEdges:!1,showOffDays:!0,showStartOfWeek:!0,dateFormat:f.formats.date,dayFormat:f.formats.day,startDate:{date:moment(new Date(-864e13)),format:f.formats.date},endDate:{date:moment(new Date(864e13)),format:f.formats.date},selectedDate:{date:moment().clone().startOf("day"),format:f.formats.date},offDays:[{dates:["Sat","Sun"],format:f.formats.day}],startOfWeek:{dates:["Mon"],format:f.formats.day},onSelectedDateChanged:null},f.prototype={setSelectedDate:function(a,b){this._setSelectedDate(moment(a,b?b:this.options.selectedDate.format)),this._render()},remove:function(){this._destroy(),a.removeData(this,"plugin_"+e)},_init:function(b){this.options=a.extend({},f.defaults,b),this._normalizeOptions(),this._destroy(),this._subscribeEvents(),this._render()},_normalizeOptions:function(){this.options.width?this.options.fillWidth=!1:(this.options.width=this.$element.width(),this.options.fillWidth=!0),"small"===this.options.size?this.options.size="sm":"large"===this.options.size&&(this.options.size="lg"),this._shimDateObject("startDate"),this._shimDateObject("endDate"),this._shimDateObject("selectedDate"),this.options.selectedDate.date.isBefore(this.options.startDate.date)&&(this.options.selectedDate.date=this.options.startDate.date.clone()),this.options.selectedDate.date.isAfter(this.options.endDate.date)&&(this.options.selectedDate.date=this.options.endDate.date.clone()),"string"==typeof this.options.startOfWeek&&(this.options.startOfWeek={dates:[this.options.startOfWeek],format:this.options.startOfWeekFormat?this.options.startOfWeekFormat:"ddd"}),"string"==typeof this.options.offDays&&(this.options.offDays=[{dates:this.options.offDays.split(","),format:this.options.offDaysFormat?this.options.offDaysFormat:"ddd"}])},_shimDateObject:function(a){var b=this.options.dateFormat;this.options.hasOwnProperty(a+"Format")&&(b=this.options[a+"Format"],delete this.options[a+"Format"]),"string"==typeof this.options[a]?this.options[a]={date:moment(this.options[a],b).clone().startOf("day"),format:b}:"object"==typeof this.options[a]&&("Moment"===this.options[a].constructor.name?this.options[a]={date:this.options[a].clone().startOf("day"),format:b}:this.options[a].hasOwnProperty("date")&&"string"==typeof this.options[a].date?(this.options[a].hasOwnProperty("format")&&(b=this.options[a].format),this.options[a].date=moment(this.options[a].date,b).clone().startOf("day"),this.options[a].format=b):this.options[a].hasOwnProperty("date")&&"Moment"===this.options[a].constructor.name&&(this.options[a].date=this.options[a].date.startOf("day")))},_unsubscribeEvents:function(){this.$element.off("click"),this.$element.off("selectedDateChanged")},_subscribeEvents:function(){this._unsubscribeEvents(),this.$element.on("click",a.proxy(this._clickedHandler,this)),"function"==typeof this.options.onSelectedDateChanged&&this.$element.on("selectedDateChanged",this.options.onSelectedDateChanged),this.options.fillWidth&&a(b).on("resize",a.proxy(this._resize,this))},_destroy:function(){this.initialized&&(this.$calendar&&this.$calendar.datepicker("remove"),this.$wrapper.remove(),this.$wrapper=null,this._unsubscribeEvents()),this.initialized=!1},_clickedHandler:function(b){b.preventDefault();var c=a(b.target),d=c.attr("class");-1!=d.indexOf("dp-nav-left")?this._back():-1!=d.indexOf("dp-nav-right")?this._forward():-1!=d.indexOf("dp-item")&&this._select(c.attr("data-moment"))},_setSelectedDate:function(a){a.isSame(this.options.selectedDate.date)||a.isBefore(this.options.startDate.date)||a.isAfter(this.options.endDate.date)||(this.options.selectedDate.date=a.startOf("day"),this.$element.trigger("selectedDateChanged",[a.clone()]))},_back:function(){this._setSelectedDate(this.options.selectedDate.date.clone().subtract("day",1)),this._render()},_forward:function(){this._setSelectedDate(this.options.selectedDate.date.clone().add("day",1)),this._render()},_select:function(a){this._setSelectedDate(moment(a,this.options.selectedDate.format)),this._render()},_calendarSelect:function(a){this._setSelectedDate(moment(a.date)),this._render()},_resize:function(){this.options.width=this.$element.width(),this._render()},_render:function(){var b=this;this.initialized?this.$calendar&&this.$calendar.datepicker("remove"):(this.$element.removeClass("datepaginator datepaginator-sm datepaginator-lg").addClass("sm"===this.options.size?"datepaginator-sm":"lg"===this.options.size?"datepaginator-lg":"datepaginator"),this.$wrapper=a(this._template.list),this.$leftNav=a(this._template.navItem).addClass("dp-nav-left").addClass("sm"===this.options.size?"dp-nav-sm":"lg"===this.options.size?"dp-nav-lg":"").addClass(this.options.squareEdges?"dp-nav-square-edges":"").append(a(this._template.icon).addClass("glyphicon-chevron-left").addClass("dp-nav-left")).width(this.options.navItemWidth),this.$rightNav=a(this._template.navItem).addClass("dp-nav-right").addClass("sm"===this.options.size?"dp-nav-sm":"lg"===this.options.size?"dp-nav-lg":"").addClass(this.options.squareEdges?"dp-nav-square-edges":"").append(a(this._template.icon).addClass("glyphicon-chevron-right").addClass("dp-nav-right")).width(this.options.navItemWidth),this.$calendar=this.options.showCalendar?a(this._template.calendar):d,this._injectStyle(),this.initialized=!0);var c=this._buildData();this.$element.empty().append(this.$wrapper.empty()),this.$leftNav.removeClass("dp-no-select").attr("title",""),c.isSelectedStartDate&&this.$leftNav.addClass("dp-no-select").attr("title","Start of valid date range"),this.$wrapper.append(a(b._template.listItem).append(this.$leftNav)),a.each(c.items,function(c,d){var e=a(b._template.dateItem).attr("data-moment",d.m).attr("title",d.hint).width(d.itemWidth);d.isSelected&&b.options.highlightSelectedDate&&e.addClass("dp-selected"),d.isToday&&b.options.highlightToday&&e.addClass("dp-today"),d.isStartOfWeek&&b.options.showStartOfWeek&&e.addClass("dp-divider"),d.isOffDay&&b.options.showOffDays&&e.addClass("dp-off"),d.isSelected&&b.options.showCalendar&&e.append(b.$calendar),"sm"===b.options.size?e.addClass("dp-item-sm"):"lg"===b.options.size&&e.addClass("dp-item-lg"),d.isValid||e.addClass("dp-no-select"),e.append(d.text),b.$wrapper.append(a(b._template.listItem).append(e))}),this.$rightNav.removeClass("dp-no-select").attr("title",""),c.isSelectedEndDate&&this.$rightNav.addClass("dp-no-select").attr("title","End of valid date range"),this.$wrapper.append(a(b._template.listItem).append(this.$rightNav)),this.$calendar&&this.$calendar.datepicker({autoclose:!0,forceParse:!0,startView:0,minView:0,todayHighlight:!0,startDate:this.options.startDate.date.toDate(),endDate:this.options.endDate.date.toDate()}).datepicker("update",this.options.selectedDate.date.toDate()).on("changeDate",a.proxy(this._calendarSelect,this))},_injectStyle:function(){this.options.injectStyle&&!c.getElementById("bootstrap-datepaginator-style")&&a('<style type="text/css" id="bootstrap-datepaginator-style">'+this._css+"</style>").appendTo("head")},_buildData:function(){for(var a=this.options.width-(this.options.selectedItemWidth-this.options.itemWidth+2*this.options.navItemWidth),b=Math.floor(a/this.options.itemWidth),c=parseInt(b/2),d=Math.floor(a/b),e=Math.floor(this.options.selectedItemWidth+(a-b*d)),f=this.options.selectedDate.date.clone().subtract("days",c),g=this.options.selectedDate.date.clone().add("days",b-c),h={isSelectedStartDate:this.options.selectedDate.date.isSame(this.options.startDate.date)?!0:!1,isSelectedEndDate:this.options.selectedDate.date.isSame(this.options.endDate.date)?!0:!1,items:[]},i=f;i.isBefore(g);i.add("days",1)){var j=this._isValidDate(i),k=this._isSelectedDate(i),l=this._isOffDay(i),m=this._isStartOfWeek(i),n=this._isToday(i);h.items[h.items.length]={m:i.clone().format(this.options.selectedDate.format),isValid:j,isSelected:k,isOffDay:l,isStartOfWeek:m,isToday:n,text:k?i.format(this.options.textSelected):i.format(this.options.text),hint:j?i.format(this.options.hint):"Invalid date",itemWidth:k?e:d}}return h},_isValidDate:function(a){return(a.isSame(this.options.startDate.date)||a.isAfter(this.options.startDate.date))&&(a.isSame(this.options.endDate.date)||a.isBefore(this.options.endDate.date))?!0:!1},_isSelectedDate:function(a){return a.isSame(this.options.selectedDate.date)},_isToday:function(a){return a.isSame(moment().startOf("day"))?!0:!1},_isStartOfWeek:function(a){var b=a.format(this.options.startOfWeek.format);return-1!==this.options.startOfWeek.dates.indexOf(b)?!0:!1},_isOffDay:function(b){var c=!1;return a.each(this.options.offDays,function(a,d){return-1!==d.dates.indexOf(b.format(d.format))?(c=!0,void 0):void 0}),c},_template:{list:'<ul class="pagination"></ul>',listItem:"<li></li>",navItem:'<a href="#" class="dp-nav"></a>',dateItem:'<a href="#" class="dp-item"></a>',icon:'<i class="glyphicon"></i>',calendar:'<i id="dp-calendar" class="glyphicon glyphicon-calendar"></i>'},_css:".datepaginator{font-size:12px;height:60px}.datepaginator-sm{font-size:10px;height:40px}.datepaginator-lg{font-size:14px;height:80px}.pagination{margin:0;padding:0;white-space:nowrap}.dp-nav{height:60px;padding:22px 0!important;width:20px;margin:0!important;text-align:center}.dp-nav-square-edges{border-radius:0!important}.dp-item{height:60px;padding:13px 0!important;width:35px;margin:0!important;border-left-style:hidden!important;text-align:center}.dp-item-sm{height:40px!important;padding:5px!important}.dp-item-lg{height:80px!important;padding:22px 0!important}.dp-nav-sm{height:40px!important;padding:11px 0!important}.dp-nav-lg{height:80px!important;padding:33px 0!important}a.dp-nav-right{border-left-style:hidden!important}.dp-divider{border-left:2px solid #ddd!important}.dp-off{background-color:#F0F0F0!important}.dp-no-select{color:#ccc!important;background-color:#F0F0F0!important}.dp-no-select:hover{background-color:#F0F0F0!important}.dp-today{background-color:#88B5DB!important;color:#fff!important}.dp-selected{background-color:#428bca!important;color:#fff!important;width:140px}#dp-calendar{padding:3px 5px 0 0!important;margin-right:3px;position:absolute;right:0;top:10}"};var g=function(a){b.console&&b.console.error(a)};a.fn[e]=function(b,c){return this.each(function(){var d=a.data(this,"plugin_"+e);"string"==typeof b?d?a.isFunction(d[b])&&"_"!==b.charAt(0)?("string"==typeof c&&(c=[c]),d[b].apply(d,c)):g("No such method : "+b):g("Not initialized, can not call method : "+b):d?d._init(b):a.data(this,"plugin_"+e,new f(this,b))})}}(jQuery,window,document);